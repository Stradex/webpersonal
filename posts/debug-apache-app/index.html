<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Finding errors from WebApp and Server: My DevOps experience.</title><meta name="description" content="Follow my personal experience trying to debug, speedup and trying to solve issues with a web app hosted in a Dedicated Server."/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/cc10fbcf3b5ee784.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cc10fbcf3b5ee784.css" data-n-g=""/><link rel="preload" href="/_next/static/css/eebf28edd0198371.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eebf28edd0198371.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-64dacd1bcd265a3c.js" defer=""></script><script src="/_next/static/chunks/framework-7dc8a65f4a0cda33.js" defer=""></script><script src="/_next/static/chunks/main-aea20559cdfa0440.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4ab625d51207f6d5.js" defer=""></script><script src="/_next/static/chunks/247-8e3451d9b12b8ca8.js" defer=""></script><script src="/_next/static/chunks/790-a3aa35eb62ec874e.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-0cee5c8989ad287e.js" defer=""></script><script src="/_next/static/0wkJIdi_3aSzEVyCohoK5/_buildManifest.js" defer=""></script><script src="/_next/static/0wkJIdi_3aSzEVyCohoK5/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="mainPage_pageContainer__KYuRP"><div class="header_headerContainer__k13P5"><h1 class="header_title__1nVYR">My Blog</h1><h2 class="header_subTitle__57E4q">Maximiliano Ruben Viamonte</h2></div><nav class="menu_menuContainer__ydYFH"><ul class="menu_leftMenu__69pnd"><li><a href="/">Home</a></li><li><a href="/blog/">Blog</a></li></ul><ul class="menu_rightMenu__a2cVK"><li><a href="https://github.com/Stradex/"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2735%27%20height=%2735%27/%3e"/></span><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img src="/_next/static/media/ui_github.b2d044cd.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li><li><a href="https://www.linkedin.com/in/maximiliano-ruben-viamonte-873b94291 "><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2735%27%20height=%2735%27/%3e"/></span><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img src="/_next/static/media/ui_linkedin.a2cd2660.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li></ul></nav><article class="postComponent_post_article__3Rmv7"><h1 class="postComponent_post_title__B6SbJ">Finding errors from WebApp and Server: My DevOps experience.</h1><hr/><small class="postComponent_post_date__dwvll"><time dateTime="2024-04-10">April 10, 2024</time></small><div><h2>Starting as DevOps</h2>
<p>A few months ago I started working in a web app that had thousands of registered clients and hundreds of active clients all the time.</p>
<p>It was a very interesting challenge for me since I used to make and work with small web apps but never something of that magnitude.</p>
<p>We did set that web app in a Debian 12 VPS. The web app itself was a <strong>Laravel</strong> APP with <strong>Blade PHP</strong> and <strong>Angular</strong> for the frontend.
The app also had web socket servers that were hosted using <strong>Node PM2</strong></p>
<h2>Moving from VSCode to VIM</h2>
<p>I was used to work with <strong>Visual Studio Code</strong>, but since I started working with this web app via SSH I realized that VS Code was quite uncomfortable for me. I used a SSH extension for it that in some machines worked and in others not and it did install a folder in my dedicated server, which I didn't like too much.</p>
<p>I was thinking in a way to be able to work from any computer, or device, easily in my server without having to configure, install, etc... something like <strong>VSCode</strong>, and <strong>VIM</strong> was the ideal solution since it was already installed in the server and also it is available in any linux terminal mostly.</p>
<hr>
<p><em>Fun fact:</em> Thanks to <strong>vim</strong> I was able to solve an issue using my phone, using <strong>Termux</strong>, while I was eating with my girlfriend at a restaurant. And that was cool.</p>
<p>So that alone makes vim greater than VS Code for me while working with VPS's and Dedicated Servers remotely.</p>
<hr>
<h2>Creating a chroot jail for frontend developers.</h2>
<p>During my work with this web app, we wanted to make a new frontend with the team, but the issue was that our backend code was private and should not be seen by the frontend developers. So, in order to make the enviroment safe for the frontend developers to work without breaking the server, and safe for my team so the backend code was safe, I made a <strong>chroot jail</strong> to restrict a user access to the whole filesystem and I configured it to work via <strong>SFTP</strong>.</p>
<p>The frontend developers we hired were used to work with Visual Studio Code so I explained them how to work using the <strong>SFTP</strong> extension and how to connect to our server. We were able to allow our developers to work in a kind controlled enviroment.</p>
<h2>System monitoring and performance issues.</h2>
<p>While working in this project I faced some performance issues and other issues in the road. Those issues appeared mostly at night when most of the people tried to use the Web APP at the same time.</p>
<p>I learned some valuable things I wish to share from this experience. <em>(The Web APP was hosted using Apache)</em></p>
<ol>
<li>Install a system monitor history in my web app in order to see if there are and, in case it happens, when the bottleneck happens. We ending installing Apache native <strong>server status</strong> and <strong>munin</strong></li>
<li>Ensure that the <strong>DNS</strong> nameservers for my  domain were fast and good. Ex: <strong>Cloudfare</strong>.</li>
<li><strong>Cache</strong> as must as you can, but always be careful with this, there are certaing things that you don't want to allow to be cached. You can enable cache with Apache itself but also it is good to make sure that the client browser will be able to cache the assets of your app.</li>
<li>Use <strong>CDN</strong> to store as much assets as I can. I try to make the client to download as less resources as possible from my server.</li>
<li>Ensure you are giving <strong>PHP</strong> <em>(or PHP-FPM)</em> enough resources to work with your server. Increase the memory limit.</li>
<li>Optimize Apache Server for high traffic with the module <strong>MPM Worker</strong> or <strong>MPM Event</strong> and configure it to your server needs.</li>
<li>Consider if the infrastructure for your app is the right one. In the case of our app it was decided that the best option was to set the database in a Dedicated Server just for the database. So we had two servers for our APP: One for the app itself and another one for the database only. Originally the web app was hosted all in just one server, but then we finally decided to change it to two servers: one for the app and other for the database.</li>
</ol>
<h2>Debug errors</h2>
<p>Since the Web App we were working with was originally a very complex app it was not an option for our team to rewrite the whole app from scratch so it was my work to go through the whole source code, understand the app and then start working in modifications and optimizations for it. In such task I encountered lots of bugs and issues that are common in such unfinished complex software. So I will share my list of recommendations.</p>
<ol>
<li>READ THE ERROR LOGS!</li>
<li>Read the error logs AGAIN!</li>
<li>Did I say again read the logs?</li>
<li>Cannot read the logs?, enable debug mode if possible and/or try to enable the logs.</li>
<li>Create a test enviroment for your app. We had another VPS for our TEST APP so I could freely make any modification without breaking our main web app.</li>
</ol>
</div></article><footer class="footer_footerStyle__hcec5"><p>Copyright © Maximiliano Ruben Viamonte 2023</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"debug-apache-app","contentHtml":"\u003ch2\u003eStarting as DevOps\u003c/h2\u003e\n\u003cp\u003eA few months ago I started working in a web app that had thousands of registered clients and hundreds of active clients all the time.\u003c/p\u003e\n\u003cp\u003eIt was a very interesting challenge for me since I used to make and work with small web apps but never something of that magnitude.\u003c/p\u003e\n\u003cp\u003eWe did set that web app in a Debian 12 VPS. The web app itself was a \u003cstrong\u003eLaravel\u003c/strong\u003e APP with \u003cstrong\u003eBlade PHP\u003c/strong\u003e and \u003cstrong\u003eAngular\u003c/strong\u003e for the frontend.\r\nThe app also had web socket servers that were hosted using \u003cstrong\u003eNode PM2\u003c/strong\u003e\u003c/p\u003e\n\u003ch2\u003eMoving from VSCode to VIM\u003c/h2\u003e\n\u003cp\u003eI was used to work with \u003cstrong\u003eVisual Studio Code\u003c/strong\u003e, but since I started working with this web app via SSH I realized that VS Code was quite uncomfortable for me. I used a SSH extension for it that in some machines worked and in others not and it did install a folder in my dedicated server, which I didn't like too much.\u003c/p\u003e\n\u003cp\u003eI was thinking in a way to be able to work from any computer, or device, easily in my server without having to configure, install, etc... something like \u003cstrong\u003eVSCode\u003c/strong\u003e, and \u003cstrong\u003eVIM\u003c/strong\u003e was the ideal solution since it was already installed in the server and also it is available in any linux terminal mostly.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cem\u003eFun fact:\u003c/em\u003e Thanks to \u003cstrong\u003evim\u003c/strong\u003e I was able to solve an issue using my phone, using \u003cstrong\u003eTermux\u003c/strong\u003e, while I was eating with my girlfriend at a restaurant. And that was cool.\u003c/p\u003e\n\u003cp\u003eSo that alone makes vim greater than VS Code for me while working with VPS's and Dedicated Servers remotely.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003eCreating a chroot jail for frontend developers.\u003c/h2\u003e\n\u003cp\u003eDuring my work with this web app, we wanted to make a new frontend with the team, but the issue was that our backend code was private and should not be seen by the frontend developers. So, in order to make the enviroment safe for the frontend developers to work without breaking the server, and safe for my team so the backend code was safe, I made a \u003cstrong\u003echroot jail\u003c/strong\u003e to restrict a user access to the whole filesystem and I configured it to work via \u003cstrong\u003eSFTP\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eThe frontend developers we hired were used to work with Visual Studio Code so I explained them how to work using the \u003cstrong\u003eSFTP\u003c/strong\u003e extension and how to connect to our server. We were able to allow our developers to work in a kind controlled enviroment.\u003c/p\u003e\n\u003ch2\u003eSystem monitoring and performance issues.\u003c/h2\u003e\n\u003cp\u003eWhile working in this project I faced some performance issues and other issues in the road. Those issues appeared mostly at night when most of the people tried to use the Web APP at the same time.\u003c/p\u003e\n\u003cp\u003eI learned some valuable things I wish to share from this experience. \u003cem\u003e(The Web APP was hosted using Apache)\u003c/em\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eInstall a system monitor history in my web app in order to see if there are and, in case it happens, when the bottleneck happens. We ending installing Apache native \u003cstrong\u003eserver status\u003c/strong\u003e and \u003cstrong\u003emunin\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eEnsure that the \u003cstrong\u003eDNS\u003c/strong\u003e nameservers for my  domain were fast and good. Ex: \u003cstrong\u003eCloudfare\u003c/strong\u003e.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCache\u003c/strong\u003e as must as you can, but always be careful with this, there are certaing things that you don't want to allow to be cached. You can enable cache with Apache itself but also it is good to make sure that the client browser will be able to cache the assets of your app.\u003c/li\u003e\n\u003cli\u003eUse \u003cstrong\u003eCDN\u003c/strong\u003e to store as much assets as I can. I try to make the client to download as less resources as possible from my server.\u003c/li\u003e\n\u003cli\u003eEnsure you are giving \u003cstrong\u003ePHP\u003c/strong\u003e \u003cem\u003e(or PHP-FPM)\u003c/em\u003e enough resources to work with your server. Increase the memory limit.\u003c/li\u003e\n\u003cli\u003eOptimize Apache Server for high traffic with the module \u003cstrong\u003eMPM Worker\u003c/strong\u003e or \u003cstrong\u003eMPM Event\u003c/strong\u003e and configure it to your server needs.\u003c/li\u003e\n\u003cli\u003eConsider if the infrastructure for your app is the right one. In the case of our app it was decided that the best option was to set the database in a Dedicated Server just for the database. So we had two servers for our APP: One for the app itself and another one for the database only. Originally the web app was hosted all in just one server, but then we finally decided to change it to two servers: one for the app and other for the database.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eDebug errors\u003c/h2\u003e\n\u003cp\u003eSince the Web App we were working with was originally a very complex app it was not an option for our team to rewrite the whole app from scratch so it was my work to go through the whole source code, understand the app and then start working in modifications and optimizations for it. In such task I encountered lots of bugs and issues that are common in such unfinished complex software. So I will share my list of recommendations.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eREAD THE ERROR LOGS!\u003c/li\u003e\n\u003cli\u003eRead the error logs AGAIN!\u003c/li\u003e\n\u003cli\u003eDid I say again read the logs?\u003c/li\u003e\n\u003cli\u003eCannot read the logs?, enable debug mode if possible and/or try to enable the logs.\u003c/li\u003e\n\u003cli\u003eCreate a test enviroment for your app. We had another VPS for our TEST APP so I could freely make any modification without breaking our main web app.\u003c/li\u003e\n\u003c/ol\u003e\n","title":"Finding errors from WebApp and Server: My DevOps experience.","date":"2024-04-10","description":"Follow my personal experience trying to debug, speedup and trying to solve issues with a web app hosted in a Dedicated Server."}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"debug-apache-app"},"buildId":"0wkJIdi_3aSzEVyCohoK5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>